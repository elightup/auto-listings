(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=JSON.parse('{"UU":"meta-box/user-dashboard"}'),n=window.React,a=window.wp.blockEditor,o=window.wp.components,s=window.wp.element,i=window.wp.i18n,b=window.wp.serverSideRender;var m=e.n(b);(0,t.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:t}){let{edit_page:l,meta_box_id:b,id:r,post_type:d="",object_type:u="",model_name:_="",show_welcome_message:p,columns:c,label_title:h,label_date:g,label_status:f,label_actions:v,title_link:w,add_new:C}=e;const E=e=>l=>t({[e]:l});0===r.length&&b&&(r=b.split(",")),r=r.filter(e=>mbudData.field_groups.some(t=>t.value===e));const y=Object.entries(mbudData.all_models).map(([e,t])=>({value:t,label:t})),x=mbudData.fields_suggestion;return(0,s.useEffect)(()=>{"model"===u&&1===y.length&&t({model_name:y[0].value})},[u,y]),(0,s.useEffect)(()=>{"post"===u&&1===mbudData.post_types.length&&t({post_type:mbudData.post_types[0].value})},[u,mbudData.post_types]),(0,n.createElement)("div",{...(0,a.useBlockProps)()},(0,n.createElement)(a.InspectorControls,null,(0,n.createElement)(o.PanelBody,{title:(0,i.__)("Settings","mb-dashboard")},(0,n.createElement)(o.SelectControl,{label:(0,i.__)("Edit page","mb-frontend-submission"),help:(0,i.__)("Choose a page where users can edit their submissions.","mb-frontend-submission"),value:l,options:[{label:(0,i.__)("-","mb-frontend-submission"),value:""},...mbudData.pages],onChange:E("edit_page")}),(0,n.createElement)(o.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,label:(0,i.__)("Columns","mb-frontend-submission"),value:c,suggestions:x,onChange:E("columns")}),"model"!==u&&(0,n.createElement)(o.SelectControl,{label:(0,i.__)("Title link","mb-frontend-submission"),help:(0,i.__)("The link action when clicking post titles.","mb-frontend-submission"),value:w,options:[{label:(0,i.__)("View","mb-frontend-submission"),value:"view"},{label:(0,i.__)("Edit","mb-frontend-submission"),value:"edit"}],onChange:E("title_link")}),(0,n.createElement)(o.TextControl,{label:(0,i.__)("Add new button text","mb-dashboard"),value:C,onChange:E("add_new")})),(0,n.createElement)(o.PanelBody,{title:(0,i.__)("Appearance","mb-dashboard"),initialOpen:!1},(0,n.createElement)(o.ToggleControl,{label:(0,i.__)("Show welcome message","mb-frontend-submission"),checked:p,onChange:E("show_welcome_message")}),"model"!==u&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.TextControl,{label:(0,i.__)("Title column label","mb-dashboard"),value:h,onChange:E("label_title")}),(0,n.createElement)(o.TextControl,{label:(0,i.__)("Date column label","mb-dashboard"),value:g,onChange:E("label_date")}),(0,n.createElement)(o.TextControl,{label:(0,i.__)("Status column label","mb-dashboard"),value:f,onChange:E("label_status")})),(0,n.createElement)(o.TextControl,{label:(0,i.__)("Actions column label","mb-dashboard"),value:v,onChange:E("label_actions")})),(0,n.createElement)(o.PanelBody,{title:(0,i.__)("Overwrite page edit attributes","mb-dashboard"),initialOpen:!1},(0,n.createElement)(o.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,label:(0,i.__)("Field group","mb-frontend-submission"),value:r,onChange:E("id"),suggestions:mbfsData.field_groups,saveTransform:e=>e?.value||"",displayTransform:e=>mbfsData.field_groups.find(t=>t.value===("string"==typeof e?e:e.value))?.label||""}),mbudData.object_types.length>1&&(0,n.createElement)(o.SelectControl,{label:(0,i.__)("Object type","mb-frontend-submission"),help:(0,i.__)("Object type of the submissions","mb-frontend-submission"),value:u,options:[{label:"-",value:""},...mbudData.object_types],onChange:E("object_type")}),"model"===u&&y.length>1&&(0,n.createElement)(o.SelectControl,{label:(0,i.__)("Model name","mb-frontend-submission"),help:(0,i.__)("Select related model for the submissions","mb-frontend-submission"),value:_,options:[{label:"-",value:""},...y],onChange:E("model_name")}),"post"===u&&mbudData.post_types.length>1&&(0,n.createElement)(o.SelectControl,{label:(0,i.__)("Post type","mb-frontend-submission"),help:(0,i.__)("Overwrite the submitted post type from the edit page.","mb-frontend-submission"),value:d,options:[{label:(0,i.__)("-","mb-frontend-submission"),value:""},...mbudData.post_types],onChange:E("post_type")}))),(0,n.createElement)(m(),{block:"meta-box/user-dashboard",attributes:e}))},save:function(){return null}})})();